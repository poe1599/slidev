---
layout: section
class: 'bg-yellow-100'
---

# Javascript

---
title: this
level: 2
layout: center
---

```js {*|2|3-7|5,10|*}
const obj = {
  color: 'red',
  fn() {
    setTimeout(function() {
      console.log(this.color)
    })
  }
}

obj.fn()
```

<!-- 
## â­â­Qï¼šè«‹èªªæ˜Žè©²ç¨‹å¼çš„consoleåŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ

âœ… Ansï¼š`undefined`ã€‚

åŽŸå› æ˜¯åœ¨ fn å‡½æ•¸ä¸­ï¼ŒsetTimeout å‡½æ•¸æ˜¯ä½¿ç”¨æ™®é€šå‡½æ•¸çš„æ–¹å¼å®šç¾©çš„ï¼Œä¸¦ä¸”æ²’æœ‰æŒ‡å®š this çš„å€¼ã€‚å› æ­¤ï¼Œåœ¨ setTimeout å‡½æ•¸å…§éƒ¨ï¼Œthis æœƒæŒ‡å‘å…¨å±€å°è±¡ï¼ˆåœ¨ç€è¦½å™¨ä¸­æ˜¯ window å°è±¡ï¼Œåœ¨ Node.jsä¸­æ˜¯ global å°è±¡ï¼‰ï¼Œè€Œä¸æ˜¯ obj å°è±¡ã€‚å› ç‚ºå…¨å±€å°è±¡ä¸­æ²’æœ‰ color å±¬æ€§ï¼Œæ‰€ä»¥æœƒæ‰“å° undefinedã€‚

ðŸ‘ å¦‚ä½•å°‡ä¸Šæ–¹çš„å°‡ `this` æˆåŠŸæŒ‡å‘ `obj` ä½¿å…¶è¼¸å‡º `'red'` ï¼Ÿ
Ansï¼š  

1. å°‡åŒ¿åå‡½å¼æ”¹ç‚ºç®­é ­å‡½å¼ã€‚
    
    æ™®é€šå‡½æ•¸æœƒåœ¨èª¿ç”¨æ™‚å‹•æ…‹æ±ºå®š this å€¼ï¼Œé€™å€‹ this å€¼æœƒæ ¹æ“šå‡½æ•¸çš„èª¿ç”¨æ–¹å¼å’Œä¸Šä¸‹æ–‡æ±ºå®šã€‚åœ¨ setTimeout ä¸­ï¼Œå› ç‚ºå®ƒæ˜¯åœ¨å…¨å±€ç’°å¢ƒä¸­è¢«èª¿ç”¨ï¼Œæ‰€ä»¥ this å€¼æœƒæŒ‡å‘å…¨å±€å°è±¡ã€‚è€Œåœ¨åš´æ ¼æ¨¡å¼ä¸‹ï¼Œthis æœƒæ˜¯ undefinedã€‚
    ç®­é ­å‡½æ•¸å‰‡ä¸åŒï¼Œå®ƒçš„ this å€¼æ˜¯åœ¨å®šç¾©æ™‚æ±ºå®šçš„ï¼Œæœƒç¹¼æ‰¿å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„ this å€¼ã€‚åœ¨ setTimeout ä¸­ï¼Œç®­é ­å‡½æ•¸è¢«å®šç¾©åœ¨ fn å‡½æ•¸ä¸­ï¼Œæ‰€ä»¥å®ƒæœƒç¹¼æ‰¿ fn å‡½æ•¸ä¸­çš„ this å€¼ï¼Œä¹Ÿå°±æ˜¯ obj å°è±¡ï¼Œå› æ­¤å¯ä»¥è¨ªå•åˆ° color å±¬æ€§çš„å€¼ã€‚
    ç°¡è€Œè¨€ä¹‹ï¼Œä½¿ç”¨æ™®é€šå‡½æ•¸å®šç¾©çš„ setTimeout å‡½æ•¸ä¸­çš„ this å€¼æœƒæŒ‡å‘å…¨å±€å°è±¡ï¼Œè€Œä½¿ç”¨ç®­é ­å‡½æ•¸å®šç¾©çš„ setTimeout å‡½æ•¸ä¸­çš„ this å€¼æœƒç¹¼æ‰¿å¤–å±¤ä¸Šä¸‹æ–‡çš„ this å€¼ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæ™®é€šå‡½æ•¸å’Œç®­é ­å‡½æ•¸çš„è¡¨ç¾æœƒæœ‰å¦‚æ­¤å¤§çš„å·®ç•°ã€‚
    
    ```jsx
    const obj = {
      color: 'red',
      fn() {
        setTimeout(() => {
          console.log(this.color);
        });
      }
    }
    
    obj.fn();
    ```
    
2. **åœ¨ `setTimeout` ä¸­ä½¿ç”¨ `.bind()`ï¼š**
    
    ä½¿ç”¨ **`bind()`** å°‡ **`this`** ç¶å®šåˆ° **`obj`** ä¸Šã€‚
    
    ```jsx
    const obj = {
      color: 'red',
      fn() {
        setTimeout(function() {
          console.log(this.color);
        }.bind(this));
      }
    }
    
    obj.fn();
    ```
-->

---
title: var Hoisting
level: 2
layout: center
---

```js {*|2,6|*}
function foo() {
  console.log(browser)
  var browser = 'Chrome'
}

foo()
```

<!-- 
## â­Qï¼šè«‹èªªæ˜Žè©²ç¨‹å¼çš„consoleåŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ

âœ… Ansï¼š`undefined`ã€‚
åŽŸå› ç‚ºåœ¨é€™å€‹ç¨‹å¼ä¸­ï¼Œç”±æ–¼JavaScriptçš„æå‡ï¼ˆhoistingï¼‰ç‰¹æ€§ï¼Œ**`var browser`** çš„è²æ˜Žæœƒè¢«æå‡åˆ°å‡½æ•¸çš„é ‚éƒ¨ï¼Œä½†è³¦å€¼éƒ¨åˆ†ä¸¦ä¸æœƒã€‚é€™æ„å‘³è‘—åœ¨ **`console.log(browser)`** è¢«åŸ·è¡Œçš„æ™‚å€™**`browser`** é›–ç„¶å·²ç¶“è²æ˜Žäº†ï¼Œä½†é‚„æ²’æœ‰è³¦å€¼ã€‚

ðŸ‘ æ”¹æˆ`const`å¾ŒåŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ  
Ansï¼š  
`Uncaught ReferenceError: Cannot access 'browser' before initialization` ï¼Œå› ç‚º `console.log` ä½æ–¼æš«æ™‚æ€§æ­»å€(TDZ)ã€‚æ³¨æ„! const å’Œ let æ˜¯æœƒæœ‰æå‡(hoist)çš„ä½œç”¨ã€‚

```jsx
function foo() {
	console.log(browser)
	const browser = 'Chrome'
}

foo()
```

> let èˆ‡ const ä¹Ÿæœ‰ hoistingã€‚ä½†ä»–å€‘ä¸æœƒåˆå§‹åŒ–ç‚º undefinedï¼Œè€Œä¸”åœ¨è³¦å€¼ä¹‹å‰è©¦åœ–å–å€¼æœƒç™¼ç”ŸéŒ¯èª¤ï¼ˆTDZ errorï¼‰ã€‚
> 
> 1. ä½¿ç”¨ var å®£å‘Šï¼Œåœ¨é€™æ™‚å€™é‚„æ²’æœ‰è³¦å€¼ï¼Œæˆ‘å€‘å¯ä»¥çµ¦ä»–ä¸€å€‹ undefinedï¼ˆinitialize as undefinedï¼‰ã€‚
> 2. ä½¿ç”¨ letï¼ˆconstï¼‰ å®£å‘Šï¼Œåœ¨ä½  Execution éšŽæ®µä»¥å‰ï¼Œä»»ä½•äººéƒ½ä¸èƒ½ç¢°å®ƒ(don't initialize it)ï¼Œè®“ä»–ä¿æŒ uninitialized (å°šæœªåˆå§‹åŒ–) .
> - å¦‚æžœä¸€å€‹å€¼è¢«æ¨™è¨»æ˜¯Â `uninitialized`Â (å°šæœªåˆå§‹åŒ–) ï¼Œä½ é‚„æ˜¯å˜—è©¦æŽ¥è§¸å®ƒï¼Œé‚£å°±æœƒæœ‰ä¸€å€‹éŒ¯èª¤ï¼š TDZ (temporal dead zone)
> 
> ![](/assets/imgs/TDZ.png)
> 
> å­¸è¡“ä¸Šï¼ŒçœŸæ­£é–‹ç™¼èªžè¨€ä¸Šçš„åŽŸå› ï¼š1. å…¶å¯¦å’Œ let æ²’æœ‰ä»»ä½•é—œä¿‚ 2.Â `TDZ error æ˜¯ç‚ºäº†å¯¦ä½œ const`
> 
> ä½ ä½¿ç”¨ä¸€å€‹ const åœ¨ block scope å…§éƒ¨ï¼Œå¦‚æžœé€™æ™‚å€™æ²’æœ‰é™åˆ¶å®ƒä¸èƒ½åˆå§‹åŒ– undefinedï¼Œä½ åœ¨çœŸæ­£ const è³¦äºˆå€¼ä»¥å‰ï¼Œä½ å¯ä»¥ console.log å®ƒï¼Œä»–æœƒæ˜¯ undefined ï¼ˆå°±åƒ var çš„ hoistingï¼‰
> 
> é€™å°±`é•èƒŒäº† const åœ¨å­¸è¡“ä¸Šï¼ˆAcademicallyï¼‰çš„æƒ³æ³•`ï¼Œ const åªèƒ½æœ‰ä¸€å€‹å€¼ã€‚æ‰€ä»¥ç‚ºäº†é¿å…é€™å€‹å•é¡Œï¼Œæ‰€æœ‰åœ¨çœŸæ­£ assign ä»¥å‰çš„æŽ¥è§¸éƒ½ç›´æŽ¥çµ¦ Errorï¼Œä»¥ä¿è­· const çš„å­¸è¡“æ€§ã€‚
> 
-->

---
title: æµ®é»žæ•¸ç²¾åº¦
level: 2
layout: center
---

```js
const num1 = 0.1
const num2 = 0.2

console.log(num1 + num2 === 0.3)
```

<!-- 
## â­â­Qï¼šè«‹èªªæ˜Žè©²ç¨‹å¼çš„consoleåŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ

âœ… Ansï¼š `false`ã€‚  
åœ¨ JavaScript ä¸­ï¼Œæµ®é»žæ•¸é‹ç®—å¯èƒ½æœƒå°Žè‡´ç²¾ç¢ºåº¦ä¸Ÿå¤±ã€‚é€™æ˜¯å› ç‚º JavaScript ä½¿ç”¨çš„æ˜¯é›™ç²¾åº¦æµ®é»žæ•¸è¡¨ç¤ºæ³•ï¼Œä¸¦ä¸” 0.1 å’Œ 0.2 éƒ½ç„¡æ³•æº–ç¢ºåœ°è¡¨ç¤ºç‚ºæœ‰é™çš„äºŒé€²åˆ¶å°æ•¸ã€‚

    ðŸ‘ å¦‚ä½•é¿å… JS æµ®é»žæ•¸æº¢ä½é€ æˆçš„ç²¾åº¦å•é¡Œï¼Ÿ  
    Ansï¼š
    
    1. **ä½¿ç”¨æ•´æ•¸é€²è¡Œé‹ç®—ï¼š** å°‡æµ®é»žæ•¸è½‰æ›ç‚ºæ•´æ•¸ï¼Œé€²è¡Œé‹ç®—ï¼Œç„¶å¾Œå†è½‰å›žæµ®é»žæ•¸ã€‚
        
        ```jsx
        const num1 = 0.1;
        const num2 = 0.2;
        
        const result = (num1 * 10 + num2 * 10) / 10;
        console.log(result);  // æ­£ç¢ºçš„ 0.3
        ```
        
    2. **ä½¿ç”¨å°ˆé–€çš„æ•¸å­¸åº«ï¼š** ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ•¸å­¸åº«ï¼Œå¦‚ BigNumber.js æˆ– Math.jsï¼Œé€™äº›åº«æä¾›äº†æ›´é«˜ç²¾åº¦çš„æ•¸å­¸é‹ç®—ã€‚
        
        ```jsx
        const BigNumber = require('bignumber.js');
        
        const num1 = new BigNumber('0.1');
        const num2 = new BigNumber('0.2');
        
        const result = num1.plus(num2);
        console.log(result.toString());  // æ­£ç¢ºçš„ 0.3
        ```
        
    3. **å°‡æµ®é»žæ•¸è½‰æ›ç‚ºæ•´æ•¸é€²è¡Œæ¯”è¼ƒï¼š** å¦‚æžœåƒ…éœ€æ¯”è¼ƒå¤§å°ï¼Œå¯ä»¥å°‡æµ®é»žæ•¸è½‰æ›ç‚ºæ•´æ•¸é€²è¡Œæ¯”è¼ƒï¼Œä»¥é¿å…æµ®é»žæ•¸ç²¾åº¦å•é¡Œã€‚
        
        ```jsx
        const num1 = 0.1;
        const num2 = 0.2;
        
        const compareResult = Math.round((num1 + num2) * 1e12) === Math.round(0.3 * 1e12);
        console.log(compareResult);  // true
        ```
        
    4. **ä½¿ç”¨ `toFixed` æ–¹æ³•ï¼š** å°‡æµ®é»žæ•¸è½‰æ›ç‚ºå­—ä¸²ï¼Œç„¶å¾Œä½¿ç”¨ **`toFixed`** æ–¹æ³•æŽ§åˆ¶å°æ•¸é»žä½æ•¸ã€‚
        
        ```jsx
        const num1 = 0.1;
        const num2 = 0.2;
        
        const result = (num1 + num2).toFixed(1);
        console.log(result);  // æ­£ç¢ºçš„ "0.3"
        ```
        

    JavaScript ä½¿ç”¨çš„æ˜¯ IEEE 754 é›™ç²¾åº¦æµ®é»žæ•¸è¡¨ç¤ºæ³•ï¼ˆDouble-precision floating-point formatï¼‰ï¼Œé€™ç¨®è¡¨ç¤ºæ³•éµå¾ž IEEE 754 æ¨™æº–ï¼Œå°‡æµ®é»žæ•¸è¡¨ç¤ºç‚ºäºŒé€²åˆ¶æ•¸ã€‚
    
    åœ¨é›™ç²¾åº¦æµ®é»žæ•¸ä¸­ï¼Œä¸€å€‹æ•¸å­—ä½”ç”¨ 64 ä½ï¼Œåˆ†ç‚ºä¸‰å€‹éƒ¨åˆ†ï¼š
    
    5. **ç¬¦è™Ÿä½ï¼ˆSign bitï¼‰ï¼š** 1 ä½ï¼Œç”¨æ–¼è¡¨ç¤ºæ­£æ•¸ï¼ˆ0ï¼‰æˆ–è² æ•¸ï¼ˆ1ï¼‰ã€‚
    6. **æŒ‡æ•¸ä½ï¼ˆExponentï¼‰ï¼š** 11 ä½ï¼Œç”¨æ–¼è¡¨ç¤ºæŒ‡æ•¸éƒ¨åˆ†ï¼Œç¢ºå®šæ•¸å­—çš„æŒ‡æ•¸ç¯„åœã€‚
    7. **å°¾æ•¸ï¼ˆFractionï¼‰ï¼š** 52 ä½ï¼Œç”¨æ–¼è¡¨ç¤ºæ•¸å­—çš„æœ‰æ•ˆä½æ•¸ã€‚
    
    JavaScript ä¸­çš„ **`Number`** é¡žåž‹å°±æ˜¯ä½¿ç”¨é€™ç¨®é›™ç²¾åº¦æµ®é»žæ•¸è¡¨ç¤ºæ³•ã€‚ç„¶è€Œï¼Œç”±æ–¼æµ®é»žæ•¸çš„æœ‰é™äºŒé€²åˆ¶è¡¨ç¤ºï¼ŒæŸäº›åé€²åˆ¶å°æ•¸ç„¡æ³•ç²¾ç¢ºè½‰æ›ç‚ºäºŒé€²åˆ¶ï¼Œå°Žè‡´ç²¾ç¢ºåº¦ä¸Ÿå¤±ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼åœ¨ JavaScript ä¸­é€²è¡Œä¸€äº›æµ®é»žæ•¸é‹ç®—æ™‚ï¼Œå¯èƒ½æœƒå¾—åˆ°ä¸ç²¾ç¢ºçš„çµæžœçš„åŽŸå› ã€‚
    
    ä¾‹å¦‚ï¼Œ0.1 å’Œ 0.2 é€™å…©å€‹æ•¸å­—åœ¨äºŒé€²åˆ¶ä¸­æ˜¯ç„¡çª®å¾ªç’°çš„å°æ•¸ï¼Œå› æ­¤ç„¡æ³•å®Œå…¨ç²¾ç¢ºåœ°è¡¨ç¤ºã€‚ç•¶é€™æ¨£çš„æ•¸å­—åƒèˆ‡é‹ç®—æ™‚ï¼Œå¯èƒ½æœƒç”¢ç”Ÿç´¯ç©çš„ç²¾ç¢ºåº¦æå¤±ã€‚
    
    ```jsx
    const num1 = 0.1;  // äºŒé€²åˆ¶è¡¨ç¤ºç‚º 0.00011001100110011001100110011001100110011001100110011...
    const num2 = 0.2;  // äºŒé€²åˆ¶è¡¨ç¤ºç‚º 0.0011001100110011001100110011001100110011001100110011...
    
    console.log(num1 + num2);  // çµæžœç‚º 0.30000000000000004
    ```
-->

---
title: Throttle vs Debounce
level: 2
layout: center
---

## **Throttle vs Debounce**

<!-- 
## â­â­â­Qï¼šè«‹èªªæ˜Žå‡½æ•¸é˜²æŠ– (debounce) å’Œå‡½æ•¸ç¯€æµ (throttle) åˆ†åˆ¥æ˜¯ä»€éº¼ï¼Ÿ

âœ… Ansï¼š
* å‡½æ•¸é˜²æŠ–æ˜¯æŒ‡ç•¶ä¸€å€‹äº‹ä»¶æŒçºŒè§¸ç™¼æ™‚ï¼Œå»¶é²ä¸€æ®µæ™‚é–“å¾Œæ‰åŸ·è¡Œç›¸æ‡‰çš„è™•ç†å‡½æ•¸ã€‚å¦‚æžœåœ¨é€™æ®µæ™‚é–“å…§äº‹ä»¶å†æ¬¡è§¸ç™¼ï¼Œå‰‡é‡æ–°è¨ˆæ™‚ï¼Œä¸åŸ·è¡Œè™•ç†å‡½æ•¸ã€‚é€™å¯ä»¥é˜²æ­¢åœ¨çŸ­æ™‚é–“å…§é »ç¹è§¸ç™¼çš„äº‹ä»¶å¼•èµ·éŽå¤šçš„è™•ç†æ“ä½œã€‚ ç°¡è€Œè¨€ä¹‹ï¼Œå‡½æ•¸é˜²æŠ–çš„ç›®çš„æ˜¯ç¢ºä¿ä¸€æ®µæ™‚é–“å…§åªåŸ·è¡Œä¸€æ¬¡å‡½æ•¸ã€‚
* å‡½æ•¸ç¯€æµæ˜¯æŒ‡åœ¨ä¸€å®šæ™‚é–“å…§ï¼Œä¸ç®¡äº‹ä»¶è§¸ç™¼çš„æ¬¡æ•¸æœ‰å¤šå°‘ï¼ŒåªåŸ·è¡Œä¸€æ¬¡è™•ç†å‡½æ•¸ã€‚ä¸åƒå‡½æ•¸é˜²æŠ–é‚£æ¨£ç­‰å¾…ä¸€æ®µæ™‚é–“å†åŸ·è¡Œï¼Œå‡½æ•¸ç¯€æµåœ¨æ¯å€‹æŒ‡å®šçš„æ™‚é–“é–“éš”å…§ç¢ºä¿æœ€å¤šåŸ·è¡Œä¸€æ¬¡ã€‚

    ðŸ‘ è«‹å•å®ƒå€‘çš„ç”¨é€”åˆ†åˆ¥ç‚ºä½•ï¼Ÿ  
    Ansï¼š
    
    1. **å‡½æ•¸é˜²æŠ–çš„ç”¨é€”ï¼š**
        - è™•ç†é »ç¹è§¸ç™¼çš„äº‹ä»¶ï¼Œå¦‚çª—å£å¤§å°è®ŠåŒ–ã€è¼¸å…¥æ¡†è¼¸å…¥ç­‰ï¼Œä»¥æ¸›å°‘éŽå¤šçš„è™•ç†æ“ä½œã€‚
        - å¯¦ç¾å¯¦æ™‚æœç´¢åŠŸèƒ½ï¼Œç•¶ç”¨æˆ¶è¼¸å…¥æœç´¢é—œéµå­—æ™‚ï¼Œå»¶é²ä¸€æ®µæ™‚é–“å†ç™¼é€è«‹æ±‚ï¼Œä»¥æ¸›å°‘è«‹æ±‚çš„æ¬¡æ•¸ã€‚
    2. **å‡½æ•¸ç¯€æµçš„ç”¨é€”ï¼š**
        - æŽ§åˆ¶äº‹ä»¶çš„è§¸ç™¼é »çŽ‡ï¼Œä¾‹å¦‚åœ¨æ‹–å‹•äº‹ä»¶ä¸­ï¼Œåªåœ¨ä¸€å®šçš„æ™‚é–“é–“éš”å…§æ›´æ–°ç›¸æ‡‰çš„æ“ä½œã€‚
        - é˜²æ­¢éŽæ–¼é »ç¹çš„ API è«‹æ±‚ï¼Œä»¥æ¸›è¼•ä¼ºæœå™¨çš„è² æ“”
-->

---
title: By Reference
level: 2
layout: center
---

```js {*|4,7-8|*}
const foo = { bar: 1 }
const fn = obj => {
  obj.bar = 2
  console.log(obj.bar)         
}

fn(foo)
console.log(foo)
```

<!-- 
## â­â­â­Qï¼šè«‹èªªæ˜Žè©²ç¨‹å¼çš„consoleåŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ


âœ… Ansï¼šfn(foo) çµæžœç‚º `2`ï¼Œconsole.log(foo) çµæžœç‚º `{bar: 2}`ã€‚

    ðŸ‘ åœ¨å‡½å¼æœ¬é«”ç›´æŽ¥ä¿®æ”¹å°åƒæ•¸çš„åƒè€ƒæœƒå¾—åˆ°ä»€éº¼ï¼Ÿ  

    Ansï¼š`2`ã€`{bar: 1}`ã€‚
    
    ç•¶åƒæ•¸ç‚ºåŸºæœ¬è³‡æ–™åž‹æ…‹æ™‚ï¼Œå‡½å¼æœ¬é«”å…§è¤‡è£½äº†ä¸€ä»½åƒæ•¸å€¼ï¼Œä»»ä½•æ“ä½œéƒ½ä¸æœƒå½±éŸ¿åŽŸåƒæ•¸çš„å¯¦éš›å€¼ã€‚åƒæ•¸ç‚ºåƒè€ƒé¡žåž‹æ™‚ï¼Œåœ¨å‡½å¼æœ¬é«”å…§ä¿®æ”¹åƒæ•¸å€¼çš„æŸå€‹å±¬æ€§å€¼æ™‚ï¼Œå°‡å°åŽŸä¾†çš„åƒæ•¸é€²è¡Œä¿®æ”¹ã€‚å¦å¤–ç•¶åƒæ•¸ç‚ºåƒè€ƒé¡žåž‹æ™‚ï¼Œå¦‚æžœç›´æŽ¥ä¿®æ”¹é€™å€‹å€¼çš„åƒè€ƒä½ç½®ï¼Œå‰‡ç›¸ç•¶æ–¼åœ¨å‡½æ•¸æ™‚é«”å…§æ–°å»ºäº†ä¸€å€‹åƒè€ƒï¼Œä»»ä½•æ“ä½œéƒ½ä¸æœƒå½±éŸ¿åŽŸåƒæ•¸ã€‚

    ```jsx
    let foo = {bar: 1}
    const func = obj => {
    	obj = 2
    	console.log(obj)
    }
    
    func(foo)
    console.log(foo)
    ```
-->

---
title: ç›¸ç­‰æ¯”è¼ƒ
level: 2
layout: center
---

## **== vs ===**

<!-- 
## â­Qï¼šè«‹èªªæ˜Žåœ¨ JS ä¸­ == å’Œ === æœ‰ä½•å·®ç•°ï¼Ÿ

âœ… Ansï¼š  
å…©å€‹ç­‰æ–¼ï¼ˆ==ï¼‰æœƒå°è¢«åˆ¤åˆ¥çš„è®Šæ•¸åšè½‰æ›åž‹åˆ¥çš„å‹•ä½œï¼ˆcoercionåˆç¨±ç‚ºimplicit type conversionï¼‰ã€‚ å°æ–¼ stringã€number ç­‰åŸºç¤Žåž‹åˆ¥è€Œè¨€ï¼Œä¸åŒåž‹åˆ¥é–“æ¯”è¼ƒï¼Œ== æœƒè½‰åŒ–æˆåŒä¸€åž‹åˆ¥å¾Œçš„ "å€¼" æ˜¯å¦ç›¸ç­‰ã€‚=== æ™‚å¦‚æžœåž‹åˆ¥ä¸åŒï¼Œå…¶çµæžœå°±æ˜¯ä¸ç›¸ç­‰ã€‚åŒåž‹åˆ¥æ¯”è¼ƒï¼Œç›´æŽ¥é€²è¡Œ "å€¼" æ¯”è¼ƒã€‚
-->

---
title: By Reference & Equality Comparisons & shadow copy
level: 2
layout: center
---

```js {*|1-4|6-9|*}
const a = [[1], [2], [3]]
const b = [[1], [2], [3]]
const c = a
const d = [...c]

console.log(a === b)
console.log(a === c)
console.log(a === d)
console.log(a[0] === d[0])
```

<!-- 
## â­â­â­Qï¼šè«‹èªªæ˜Žè©²ç¨‹å¼çš„consoleåŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ


âœ… Ansï¼š
- console.log(a === b) // false
- console.log(a === c) // true
- console.log(a === d) // false
- console.log(a[0] === d[0]) // true

å°æ–¼ Array Object ç­‰é«˜ç´šåž‹åˆ¥è€Œè¨€ï¼Œç‰©ä»¶æˆ–é™£åˆ—æ¯”è¼ƒçš„æ˜¯åƒè€ƒ referenceã€‚  
åŸºç¤Žåž‹åˆ¥èˆ‡é«˜ç´šåž‹åˆ¥æ¯”è¼ƒæ™‚ï¼Œ== å°‡é«˜ç´šåž‹åˆ¥è½‰åŒ–ç‚ºåŸºç¤Žåž‹åˆ¥ï¼Œé€²è¡Œ "å€¼" æ¯”è¼ƒï¼Œ===å‰‡å› ç‚ºåž‹åˆ¥ä¸åŒçµæžœç‚º `false`ã€‚
-->

---
title: refactor
level: 2
layout: center
---

```js
function foo(fruit, quantity) {
  // åˆ¤å®šä¸€ï¼šfruit å¿…é ˆæœ‰å€¼
  if (fruit) {
    
    // åˆ¤å®šäºŒï¼šfruit å¿…é ˆæ˜¯ç´…è‰²çš„
    if (fruit === 'apple' || fruit === 'strawberry' || fruit === 'cherry' || fruit === 'cranberries') {
      console.log('red fruit')

      // åˆ¤å®šä¸‰ï¼šquantity æ•¸é‡å¿…é ˆå¤§æ–¼ 10
      if (quantity > 10) {
        console.log('big quantity')
      }
    }
  } else {
    throw new Error('No fruit!')
  }
}
```

<!-- 
## â­â­Qï¼šé‡å° coding style å¦‚ä½•æ”¹å–„å·¢ç‹€æ¢ä»¶èªžå¥èˆ‡å¤šé‡æ¢ä»¶ï¼Ÿ


âœ… Ansï¼š
1. ä½¿ç”¨ return ç›¡æ—©å›žå‚³ä¾†æ¸›å°‘å·¢ç‹€æ¢ä»¶èªžå¥çš„å±¤æ•¸ã€‚
2. ä½¿ç”¨ includes ä¾†è™•ç†å¤šé‡æ¢ä»¶ã€‚
-->

---
title: Asynchronous Character Printing
level: 2
layout: center
---

```js
let t = ''
const text = 'cool!'

const waitPrint = () => {
  return new Promise((resolve) => {
    setTimeout(() => {
      console.log(t)
      resolve(t)
    }, 0)
  })
}

text.split('').forEach(async (n) => {
  t = n
  await waitPrint()
})
```

<!-- 
## â­â­â­Qï¼šè«‹å•ä»¥ä¸Šé€™æ®µç¨‹å¼ç¢¼æœ€å¾Œçš„åŸ·è¡Œçµæžœç‚ºä½•ï¼Ÿ


âœ… Ansï¼šæ‰“å°å‡º5å€‹"!"

é€™å€‹é¡Œç›®æ¶‰åŠäº†å¹¾å€‹é‡è¦çš„æ¦‚å¿µï¼š

* éžåŒæ­¥è™•ç†ï¼ˆAsynchronous Processingï¼‰ï¼šJavaScript æ˜¯ä¸€ç¨®å–®ç·šç¨‹çš„èªžè¨€ï¼Œç•¶åŸ·è¡Œä¸€æ®µç¨‹å¼ç¢¼æ™‚ï¼Œæœƒé€è¡ŒåŸ·è¡Œã€‚ä½†æ˜¯ï¼Œç•¶éœ€è¦è™•ç†ä¸€äº›éœ€è¦æ™‚é–“çš„æ“ä½œï¼ˆä¾‹å¦‚ç¶²è·¯è«‹æ±‚ã€æª”æ¡ˆè®€å–ç­‰ï¼‰ï¼Œå–®ç´”çš„åŒæ­¥è™•ç†æ–¹å¼æœƒé€ æˆç¨‹å¼é˜»å¡žï¼Œå› æ­¤ä½¿ç”¨éžåŒæ­¥è™•ç†å¯ä»¥è®“ç¨‹å¼åœ¨ç­‰å¾…æ™‚é–“å…§åŸ·è¡Œå…¶ä»–ä»»å‹™ï¼Œå¾…æ“ä½œå®Œæˆå¾Œå†å›žä¾†è™•ç†çµæžœã€‚
* Promiseï¼šPromise æ˜¯ä¸€å€‹è¡¨ç¤ºéžåŒæ­¥æ“ä½œå®Œæˆæˆ–å¤±æ•—çš„ç‰©ä»¶ã€‚å®ƒä»£è¡¨äº†ä¸€å€‹å€¼ï¼ˆé€šå¸¸æ˜¯æœªä¾†æœƒç™¼ç”Ÿçš„äº‹ä»¶ï¼‰ï¼Œè®“æˆ‘å€‘å¯ä»¥å°‡ç¨‹å¼çš„è¡Œç‚ºåŒ…è£æˆä¸€å€‹ Promise ç‰©ä»¶ï¼Œä¸¦ä¸”å¯ä»¥é€éŽ .then() å’Œ .catch() æ–¹æ³•ä¾†è™•ç†æ“ä½œå®Œæˆæˆ–å¤±æ•—å¾Œçš„çµæžœã€‚
* async/awaitï¼šasync å‡½å¼æ˜¯ç”¨ä¾†å®šç¾©ä¸€å€‹è¿”å›ž Promise ç‰©ä»¶çš„å‡½å¼ï¼Œè€Œ await é‹ç®—å­ç”¨ä¾†ç­‰å¾…ä¸€å€‹ Promise ç‰©ä»¶è§£æžï¼Œä¸¦è¿”å›žè§£æžå¾Œçš„å€¼ã€‚async/await è®“éžåŒæ­¥ç¨‹å¼ç¢¼çœ‹èµ·ä¾†æ›´åƒåŒæ­¥ç¨‹å¼ç¢¼ï¼Œè®“é–‹ç™¼è€…æ›´å®¹æ˜“ç†è§£å’Œç·¨å¯«ã€‚

é€™å€‹é¡Œç›®ä¸­ï¼Œé€šéŽä½¿ç”¨ setTimeout æ¨¡æ“¬ä¸€å€‹éžåŒæ­¥æ“ä½œï¼Œåœ¨æ¯æ¬¡è¿´åœˆä¸­ï¼Œå°‡å­—ä¸² text åˆ†å‰²ç‚ºå–®å€‹å­—å…ƒå¾Œï¼Œä½¿ç”¨ async/await ä¾†ç­‰å¾… waitPrint å‡½å¼çš„åŸ·è¡Œçµæžœã€‚ç„¶è€Œï¼Œç”±æ–¼ forEach æ–¹æ³•ä¸æœƒç­‰å¾… await çš„ Promise è§£æžï¼Œå°Žè‡´ waitPrint å‡½å¼æœƒåœ¨æ‰€æœ‰è¿´åœˆå®Œæˆå¾Œæ‰åŸ·è¡Œï¼Œå› æ­¤åªæœƒå°å‡ºæœ€å¾Œä¸€å€‹å­—å…ƒã€‚é€™å¼·èª¿äº†åœ¨è™•ç†éžåŒæ­¥æ“ä½œæ™‚ï¼Œå°æ–¼äº‹ä»¶é †åºçš„ç†è§£å’Œè™•ç†çš„é‡è¦æ€§ã€‚
-->
